/* baic.js - 2016/11/25
   Copyright (c) 2016 baic <303394539@qq.com> */

"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};!function(global,factory){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=global.document?factory(global,!0):function(w){if(!w.document)throw new Error("Baic requires a window with a document");return factory(w)}:factory(global)}("undefined"!=typeof window?window:void 0,function(window,noGlobal){function _init(selector,children){return selector?selector.isB&&Baic.isUndefined(children)?selector:Baic.isFunction(selector)?void Baic.ready(selector):B(Baic.getDOMObject(selector,children),selector):B()}function _checktype(type){var args=Baic.toArray(arguments,1);return function(obj){var bool=!0;return args.length&&Baic.each(args,function(item){bool&&(bool=Baic.isFunction(item)?item(obj):item)}),Baic.type(obj)===type&&bool}}var document=window.document,OBJECT_PROTOTYPE=Object.prototype,ARRAY_PROTOTYPE=Array.prototype,FUNCTION_PROTOTYPE=Function.prototype,STRING_PROTOTYPE=String.prototype,NUMBER_PROTOTYPE=Number.prototype,EXP_TYPE=/\s([a-z|A-Z]+)/,Baic=function(selector,children){return _init(selector,children)},B=function B(dom,selector){return dom=dom||[],dom.__proto__=B.prototype,dom.selector=selector||"",dom};Baic.fn=B.prototype={isB:!0,constructor:Baic,selector:"",length:0,indexOf:ARRAY_PROTOTYPE.indexOf,forEach:ARRAY_PROTOTYPE.forEach,map:ARRAY_PROTOTYPE.map,filter:ARRAY_PROTOTYPE.filter},Baic.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[i]||{},i++),"object"===("undefined"==typeof target?"undefined":_typeof(target))||Baic.isFunction(target)||(target={}),i===length&&(target=this,i--);i<length;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(Baic.isPlainObject(copy)||(copyIsArray=Baic.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&Baic.isArray(src)?src:[]):clone=src&&Baic.isPlainObject(src)?src:{},target[name]=Baic.extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target},Baic.extend({each:function(obj,fn,scope){if(Baic.isArray(obj))ARRAY_PROTOTYPE.forEach.apply(obj,Baic.toArray(arguments,1));else for(var key in obj)Baic.hasOwn(obj,key)&&fn.call(scope,obj[key],key,obj)},map:function(obj,fn,scope){if(Baic.isArray(obj))return ARRAY_PROTOTYPE.map.apply(obj,Baic.toArray(arguments,1));var result={};return Baic.each(obj,function(value,key,object){result[key]=fn.call(scope,value,key,object)}),result},toArray:function(obj,begin,end){return ARRAY_PROTOTYPE.slice.call(obj,begin,end)},toStr:function(obj){try{return Baic.isString(obj)?obj:obj===!0?"yes":obj===!1?"no":JSON.stringify(obj)}catch(e){return obj}},flatten:function(obj){return obj.length?[].concat.apply([],obj):obj},getGlobalVariable:function(obj){var iframe=document.createElement("iframe");return iframe.style.display="none",iframe.onload=function(){var iframeKeys=Object.keys(iframe.contentWindow),keys=[];Baic.each(Object.keys(obj),function(key){key in iframeKeys||keys.push(key)}),iframe.remove(),obj.__globalVariable__=keys},iframe.src="about:blank",document.body.appendChild(iframe),obj.__globalVariable__}}),Baic.extend({nop:function(){},nopp:Promise.resolve(),tryCatch:function(fn){var _this=this;return fn&&Baic.isFunction(fn)?new Promise(function(resolve,reject){try{resolve(fn.call(_this))}catch(e){reject(e)}}.bind(this)):Promise.reject()},hasOwn:function(object,property){return OBJECT_PROTOTYPE.hasOwnProperty.call(object,property)},type:function(obj){return OBJECT_PROTOTYPE.toString.call(obj).match(EXP_TYPE)[1].toLowerCase()},isFunction:_checktype("function"),isString:_checktype("string"),isBoolean:_checktype("boolean"),isArray:Array.isArray,fromArray:Array.from,ofArray:Array.of,isNumber:_checktype("number",function(obj){return!isNaN(obj)}),isNull:_checktype("null"),isWindow:function(obj){return null!=obj&&obj===obj.window},isUndefined:_checktype("undefined"),isObject:_checktype("object"),isPlainObject:function(obj){return obj&&!obj.nodeType&&!Baic.isWindow(obj)&&Baic.isObject(obj)&&!Object.getPrototypeOf(obj)&&obj.constructor&&Baic.isFunction(obj.constructor)},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},isJSON:function(obj){return Baic.isObject(obj)||Baic.isArray(obj)},isJSONString:function(obj){return Baic.isString(obj)&&/^\{.*?\}$|^\[.*?\]$/.test(obj.trim())&&!!function(){try{return JSON.parse(obj)}catch(e){}}()},parseJSON:function(obj){try{return JSON.parse(obj+"")}catch(e){return{}}},getWindow:function(obj){return Baic.isWindow(obj)?obj:9===obj.nodeType&&obj.defaultView},ready:function(callback){return new Promise(function(resolve){/complete|loaded|interactive/.test(document.readyState)&&document.body?resolve():document.addEventListener("DOMContentLoaded",function(){return resolve()})}).then(function(){return Baic.isFunction(callback)&&callback(Baic),Promise.resolve()})},random:function(min,max){var rand=Math.floor(min+Math.random()*(max-min));return rand=isNaN(rand)?function(a,b){!Baic.isUndefined(b)||(b=a,a=0);var c=b-a,e=Math.random();return a+e*c|0}(min||9999999):rand},VENDORS:function(){var styles=document.defaultView.getComputedStyle(document.documentElement,"")||window.getComputedStyle(document.documentElement,"")||"";if(!styles)return["-webkit-","-moz-","-ms-","-o-",""];var vendors=Array.prototype.slice.call(styles).join("").match(/-(moz|webkit|ms|o)-/);return Array.isArray(vendors)?[""].concat(vendors[0]):""===styles.OLink&&["","o"]}()}),Baic.extend(FUNCTION_PROTOTYPE,{bind:function(scope){var method=this,args=Baic.toArray(arguments,1);return function(){return method.apply(scope,args.concat(Baic.toArray(arguments)))}},defer:function(){return this._job=setTimeout.apply(null,[this].concat(Baic.toArray(arguments)))},cycle:function(){return this._cycle=setInterval.apply(null,[this].concat(Baic.toArray(arguments)))},cancel:function(){var type=arguments.length<=0||void 0===arguments[0]?1:arguments[0];this._job&&1===type?clearTimeout(this._job):this._cycle&&2===type&&clearInterval(this._cycle)}}),Baic.extend(STRING_PROTOTYPE,{isJSONString:function(){return Baic.isJSONString(this)},parseJSON:function(){return Baic.parseJSON(this)},firstUpperCase:function(){return this.replace(/\b(\w)|\s(\w)/g,function(m){return m.toUpperCase()})},firstLowerCase:function(){return this.replace(/\b(\w)|\s(\w)/g,function(m){return m.toLowerCase()})},trim:function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},toBoolean:function(){return/^(?:yes|ok|1|on|true)$/i.test(this.trim())}});var _add=function(arg1,arg2){arg1=arg1||0,arg2=arg2||0;var r1,r2,m,c;try{r1=arg1.toString().split(".")[1].length}catch(e){r1=0}try{r2=arg2.toString().split(".")[1].length}catch(e){r2=0}if(c=Math.abs(r1-r2),m=Math.pow(10,Math.max(r1,r2)),c>0){var cm=Math.pow(10,c);r1>r2?(arg1=Number(arg1.toString().replace(".","")),arg2=Number(arg2.toString().replace(".",""))*cm):(arg1=Number(arg1.toString().replace(".",""))*cm,arg2=Number(arg2.toString().replace(".","")))}else arg1=Number(arg1.toString().replace(".","")),arg2=Number(arg2.toString().replace(".",""));return(arg1+arg2)/m},_sub=function(arg1,arg2){arg1=arg1||0,arg2=arg2||0;var r1,r2,m,n;try{r1=arg1.toString().split(".")[1].length}catch(e){r1=0}try{r2=arg2.toString().split(".")[1].length}catch(e){r2=0}return m=Math.pow(10,Math.max(r1,r2)),n=r1>=r2?r1:r2,((arg1*m-arg2*m)/m).toFixed(n)},_mul=function(arg1,arg2){arg1=arg1||0,arg2=arg2||0;var m=0,s1=arg1.toString(),s2=arg2.toString();try{m+=s1.split(".")[1].length}catch(e){}try{m+=s2.split(".")[1].length}catch(e){}return Number(s1.replace(".",""))*Number(s2.replace(".",""))/Math.pow(10,m)},_div=function(arg1,arg2){arg1=arg1||0,arg2=arg2||0;var r1,r2,t1=0,t2=0;try{t1=arg1.toString().split(".")[1].length}catch(e){}try{t2=arg2.toString().split(".")[1].length}catch(e){}return r1=Number(arg1.toString().replace(".","")),r2=Number(arg2.toString().replace(".","")),r1/r2*Math.pow(10,t2-t1)};return Baic.extend(Number,{add:function(){return Baic.toArray(arguments).reduce(function(arg1,arg2){return _add(arg1,arg2)})},sub:function(){return Baic.toArray(arguments).reduce(function(arg1,arg2){return _sub(arg1,arg2)})},mul:function(){return Baic.toArray(arguments).reduce(function(arg1,arg2){return _mul(arg1,arg2)})},div:function(arg1,arg2){return Baic.toArray(arguments).reduce(function(arg1,arg2){return _div(arg1,arg2)})}}),Baic.extend(NUMBER_PROTOTYPE,{cancel:function(type){type=type||1,this&&(1===type?clearTimeout(this):2===type&&clearInterval(this))},add:function(){return Number.add.apply(this,[].concat.apply(this,Baic.toArray(arguments)))},sub:function(){return Number.sub.apply(this,[].concat.apply(this,Baic.toArray(arguments)))},mul:function(){return Number.mul.apply(this,[].concat.apply(this,Baic.toArray(arguments)))},div:function(){return Number.div.apply(this,[].concat.apply(this,Baic.toArray(arguments)))}}),"function"==typeof define&&define.amd&&define("Baic",[],function(){return Baic}),"undefined"==typeof noGlobal&&(window.Baic=window.b=Baic)&&("$"in window||(window.$=Baic)),Baic});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};!function(global,factory){if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports))module.exports=global.Baic?factory(global,global.Baic,!0):function(w,frame){if(!w.Baic)throw new Error("ajax requires with Baic");return factory(w,frame)};else{if(!global.Baic)throw new Error("ajax requires with Baic");factory(global,global.Baic)}}("undefined"!=typeof window?window:void 0,function(window,Baic,noFrame){function _xhrForm(method,url,data,success,dataType){return Baic.ajax({type:method,url:url,data:data,success:success,dataType:dataType,contentType:"application/x-www-form-urlencoded"})}function _xhrStatus(xhr,options){xhr.status>=200&&xhr.status<300||0===xhr.status?options.async&&_xhrSuccess(_parseResponse(xhr,options),xhr,options):_xhrError("Unsuccesful request",xhr,options)}function _xhrSuccess(response,xhr,options){response instanceof Error?_xhrError(response.message,response,options):(options.success.call(options.context,response,xhr,options),options._resolve(response,xhr,options),delete options._resolve,delete options._reject)}function _xhrError(type,xhr,options){options.error.call(options.context,type,xhr,options),options._reject(response,xhr,options),delete options._resolve,delete options._reject}function _xhrTimeout(xhr,options){xhr.onreadystatechange={},xhr.abort(),_xhrError("Timeout exceeded",xhr,options)}function _parseResponse(xhr,options){var response=xhr.responseText;if(response)if(options.dataType===Baic.AJAX_DEFAULTS.MIME)try{response=JSON.parse(response)}catch(error){response=error,_xhrError("Parse Error",xhr,options)}else"xml"===options.dataType&&(response=xhr.responseXML);return response}var abortTimeout,_AJAX_DEFAULTS={TYPE:"GET",MIME:"json"},_AJAX_MIME_TYPES={script:"text/javascript, application/javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},_AJAX_OPTIONS={type:_AJAX_DEFAULTS.TYPE,async:!0,success:Baic.nop,error:Baic.nop,context:null,dataType:_AJAX_DEFAULTS.MIME,headers:{},timeout:0,xhr:function(){return new window.XMLHttpRequest}},JSONP_ID=0,Ajax=function(options){return new Promise(function(resolve,reject){options=Baic.extend({_resolve:resolve,_reject:reject},Baic.AJAX_OPTIONS,options);var xhr=options.xhr();if(options.data&&(options.type===Baic.AJAX_DEFAULTS.TYPE?options.url+=Baic.url.query(options.data,options.url.indexOf("?")<0?"?":"&"):options.data=Baic.url.query(options.data)),options.url.indexOf("=?")>=0)return Baic.jsonp(options);xhr.onreadystatechange=function(){4===xhr.readyState&&(abortTimeout&&abortTimeout.cancel(),_xhrStatus(xhr,options))},xhr.open(options.type,options.url,options.async),options.contentType&&(options.headers["Content-Type"]=options.contentType),options.dataType&&(options.headers.Accept=Baic.AJAX_MIME_TYPES[options.dataType]);for(var key in options.headers)Baic.hasOwn(options.headers,key)&&xhr.setRequestHeader(key,options.headers[key]);options.timeout>0&&(abortTimeout=_xhrTimeout.defer(options.timeout,xhr,options));try{xhr.send(options.data)}catch(error){_xhrError("Resource not found",xhr=error,options)}})};return"function"==typeof define&&define.amd&&define("Ajax",[],function(){return Ajax}),"undefined"==typeof noGlobal&&Baic.extend({AJAX_DEFAULTS:_AJAX_DEFAULTS,AJAX_OPTIONS:_AJAX_OPTIONS,AJAX_MIME_TYPES:_AJAX_MIME_TYPES,ajax:Ajax,jsonp:function(options){if(options.async){var callbackName="jsonp"+ ++JSONP_ID,script=document.createElement("script"),xhr={abort:function(){Baic(script).remove(),callbackName in window&&delete window[callbackName]}};return window[callbackName]=function(response){clearTimeout(abortTimeout),xhr.abort(),_xhrSuccess(response,xhr,options)},script.src=options.url.replace(/=\?/,"="+callbackName),Baic("head").append(script),options.timeout>0&&(abortTimeout=setTimeout(_xhrTimeout,options.timeout,xhr,options)),xhr}},get:function(url,data,success,dataType){return Baic.isFunction(data)&&(dataType=success,success=data,data=null),Baic.ajax({url:url,data:data,success:success,dataType:dataType})},post:function(url,data,success,dataType){return Baic.isFunction(data)&&(dataType=success,success=data,data=null),_xhrForm.call(this,"POST",url,data,success,dataType)},put:function(url,data,success,dataType){return Baic.isFunction(data)&&(dataType=success,success=data,data=null),_xhrForm.call(this,"PUT",url,data,success,dataType)},json:function(url,data,success){return Baic.ajax({url:url,data:data,success:success,dataType:_AJAX_DEFAULTS.MIME})},delete:function(url,data,success,dataType){return Baic.isFunction(data)&&(dataType=success,success=data,data=null),_xhrForm.call(this,"DELETE",url,data,success,dataType)}}),Ajax});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};!function(global,factory){if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports))module.exports=global.Baic?factory(global,global.Baic,!0):function(w,frame){if(!w.Baic)throw new Error("Animator requires with Baic");return factory(w,frame)};else{if(!global.Baic)throw new Error("Animator requires with Baic");factory(global,global.Baic)}}("undefined"!=typeof window?window:void 0,function(window,Baic,noFrame){function _cancel(obj){_cancelAnimationFrame(obj._Animation),obj._Animation=null}function _next(){this.frametime=Date.now(),this.dt=this.frametime-this.starttime;var num=_easing(this.starttime,this.duration,this.easing,this.reversed);num>=1||this.dt>=this.duration?(this.value=this.endValue,_cancel(this),this.onStep(),this.onEnd()):(this._Animation=_requestAnimationFrame(_next.bind(this)),this.value=this.startValue+num*(this.endValue-this.startValue),this.onStep())}function _easing(starttime,duration,easing,reversed){var frame=(Date.now()-starttime)/duration;return reversed?frame>=1?0:1-easing(1-frame):frame>=1?1:easing(frame)}var _VENDORS=[];Baic.each(Baic.VENDORS,function(item){_VENDORS.unshift(item.replace(/-/g,""))});var _requestAnimationFrame=function(index,fn){for(;index--&&!(fn=window[(_VENDORS[index]+"RequestAnimationFrame").firstLowerCase()]););return fn||function(callback){setTimeout(callback,15)}}(_VENDORS.length),_cancelAnimationFrame=function(index,fn){for(;index--&&!(fn=window[(_VENDORS[index]+"CancelAnimationFrame").firstLowerCase()]||window[(_VENDORS[index]+"CancelRequestAnimationFrame").firstLowerCase()]););return fn||clearTimeout}(_VENDORS.length);Baic.extend(window,{requestAnimationFrame:_requestAnimationFrame,cancelAnimationFrame:_cancelAnimationFrame}),Baic.extend({easing:{linear:function(n){return n},cubicIn:function(n){return Math.pow(n,3)},cubicOut:function(n){return Math.pow(n-1,3)+1},easeOutBounce:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},quadInOut:function(n){return n=2*n,n<1?Math.pow(n,2)/2:-1*(--n*(n-2)-1)/2}}});var Animator=function(options){Baic.extend(this,{duration:350,startValue:0,endValue:1,reversed:!1,easing:Baic.easing.linear,onStep:Baic.nop,onStop:Baic.nop,onEnd:Baic.nop},options)};return Baic.extend(Animator.prototype,{start:function(){this.stop(),this.starttime=this.frametime=Date.now(),this.value=this.startValue,this._Animation=_requestAnimationFrame(_next.bind(this))},stop:function(){_cancel(this),this.onStop()}}),"function"==typeof define&&define.amd&&define("Animator",[],function(){return Animator}),"undefined"==typeof noFrame&&(Baic.Animator=Animator),Animator});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};!function(global,factory){if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports))module.exports=global.Baic?factory(global,global.Baic,!0):function(w,frame){if(!w.Baic)throw new Error("browser requires with Baic");return factory(w,frame)};else{if(!global.Baic)throw new Error("browser requires with Baic");factory(global,global.Baic)}}("undefined"!=typeof window?window:void 0,function(window,Baic,noFrame){var _match,_userAgent=window.navigator.userAgent.toLowerCase(),_msPointerEnabled=!!window.navigator.msPointerEnabled,_EXPS={mobile:/iphone|android|windows phone|ipod|ipad|apple.*mobile.*safari/,ios:/iphone|ipod|ipad/,iphone:/(iphone\sos)\s([\d_]+)/,android:/(android)\s+([\d.]+)/,ipad:/(ipad).*os\s([\d_]+)/,ipod:/(ipod).*os\s([\d_]+)/,version:/.*(?:rv|chrome|webkit|version|ie)[\/: ](.+?)([ \\);]|$)/,wx:/micromessenger\/([\d\.]+)/},Browser={touch:"ontouchstart"in window||_msPointerEnabled,gesture:"ongesturestart"in window||_msPointerEnabled,ios:_EXPS.ios.test(_userAgent),wx:_EXPS.wx.test(_userAgent),android:_EXPS.android.test(_userAgent),mobile:_EXPS.mobile.test(_userAgent),pixelRatio:window.devicePixelRatio||1};return Browser.version=function(){if(Browser.ios){if(_match=_userAgent.match(_EXPS.iphone)||_userAgent.match(_EXPS.ipad)||_userAgent.match(_EXPS.ipod))return _match[2].replace(/_/g,".")}else{if(!Browser.android)return Browser.wx?(_userAgent.match(_EXPS.wx)||[])[1]||"0":(_userAgent.match(_EXPS.mobile.test(_userAgent)?_EXPS.mversion:_EXPS.version)||[])[1]||"";if(_match=_userAgent.match(_EXPS.android))return _match[2]}}(),"function"==typeof define&&define.amd&&define("Browser",[],function(){return Browser}),"undefined"==typeof noFrame&&(Baic.browser=Browser),Browser});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};!function(global,factory){if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports))module.exports=global.Baic?factory(global,global.Baic):function(w,frame){if(!w.Baic)throw new Error("dom requires with Baic");return factory(w,frame)};else{if(!global.Baic)throw new Error("dom requires with Baic");factory(global,global.Baic)}}("undefined"!=typeof window?window:void 0,function(window,Baic){function _hasClass(dom,name){return dom.classList?dom.classList.contains(name):dom.className.split(/\s+/g).indexOf(name)>=0}function _addElement(mode){return function(value){var method=function(item,value){switch(mode){case 0:item.appendChild(value);break;case 1:item.insertBefore(value,item.firstChild);break;case 2:item.parentNode.insertBefore(value,item)}};Baic.each(this,function(item){Baic.isString(value)||Baic.isNumber(value)?item.insertAdjacentHTML(mode?2===mode?"beforeBegin":"afterBegin":"beforeEnd",value):Baic.isArray(value)?Baic.each(value,function(value){method(item,value)}):method(item,value)}),2===mode&&this.remove()}}function _createElements(elements,parentNode){var nodes=[],type=Baic.type(elements),vendor=function(property,value){return Baic.map(Baic.VENDORS,function(item){return item+property+":"+value}).join(";")},processB=function(q){return parentNode&&Baic(parentNode).append(q),q};if(elements.isB)return processB(elements);if("object"==type||"string"==type)elements=[elements];else if("array"!==type)return nodes;return Baic.each(elements,function(properties){if(properties){if(properties.isB)return processB(properties);var element;if(Baic.isString(properties))element=document.createTextNode(properties);else{element=document.createElement(properties.tag||"div");var property,value,styles=[];for(property in properties)if(Baic.hasOwn(properties,property))switch(value=properties[property],property){case"tag":case"components":break;case"style":styles.push(value);break;case"flex":styles.push(vendor("box-flex",value));break;case"text":element.textContent=value;break;case"html":element.innerHTML=value;break;case"classes":case"className":element.className=value;break;case"showing":styles.push("display:"+(value?"block":"none"));break;case"width":case"height":case"top":case"bottom":case"left":case"right":styles.push(property+":"+(Baic.isString(value)?value:+value+"px"));break;default:EVENT_PREFIX.test(property)&&Baic.isFunction(value)?Baic(element).on(property[2].toLowerCase()+property.slice(3),value):null!=value&&element.setAttribute(property.replace(/[A-Z]/g,function(obj){return"-"+obj.toLowerCase()}),Baic.toStr(value))}properties.components&&_createElements(properties.components,element),styles.length&&(element.style.cssText=styles.join(";"))}parentNode&&parentNode.appendChild(element),nodes.push(element)}}),nodes}function _createBaicElements(elements,parentNode){return Baic.isString(parentNode)?parentNode=Baic(parentNode)[0]:Baic.isArray(parentNode)&&(parentNode=parentNode[0]),Baic(_createElements(elements))}var EVENT_PREFIX=/^on[A-Z]/,ELEMENT_ID=1;return Baic.extend(Baic.fn,{html:function(value){return Baic.isUndefined(value)?this[0].innerHTML:(Baic.each(this,function(item){Baic.isString(value)||Baic.isNumber(value)?item.innerHTML=value:(item.innerHTML=null,Baic.isArray(value)?Baic.each(value,function(dom){dom.nodeType?item.appendChild(dom):item.innerHTML=dom}):value.nodeType&&item.appendChild(value))}),this)},text:function(value){return Baic.isUndefined(value)?this[0].textContent:(Baic.each(this,function(item){item.textContent=Baic.toStr(value)}),this)},empty:function(){return Baic.each(this,function(item){item.innerHTML=null}),this},remove:function(){Baic.each(this,function(item){item.remove()})},attr:function(name,value){var _this=this;if(Baic.isUndefined(value)){if(Baic.isString(name))return this[0].getAttribute(name);Baic.isJSON(name)&&Baic.each(name,function(v,k){_this.attr(k,v)}.bind(this))}else Baic.each(this,function(item){item.setAttribute(name,Baic.toStr(value))});return this},removeAttr:function(name){var _this2=this;return Baic.each(this,function(item){Baic.isArray(name)?Baic.each(name,function(value){_this2.removeAttr(value)}.bind(_this2)):item.removeAttribute(name)}.bind(this)),this},data:function(name,value){return this.length<=10&&this[0].dataset?Baic.isUndefined(value)?this[0].dataset[name]:(Baic.each(this,function(item){item.dataset[name]=Baic.toStr(value)}),this):this.attr("data-"+name,value)},removeDate:function(name){return this.removeAttr("data-"+name)},val:function(value){return Baic.isUndefined(value)?this[0].value:(Baic.each(this,function(item){item.value=Baic.toStr(value)}),this)},hasClass:function(name){return _hasClass(this[0],name)},addClass:function(name){return Baic.each(this,function(item){_hasClass(item,name)||(item.classList?item.classList.add(name):item.className=(item.className+" "+name).trim())}),this},removeClass:function(name){return Baic.each(this,function(item){name==item.className?item.className="":(name=name.trim(),_hasClass(item,name)&&(item.classList?item.classList.remove(name):item.className=item.className.replace(new RegExp("^"+[name,name,name].join(" | ")+"$","g")," ").replace(/\s+/g," ").trim()))}),this},css:function(name,value){var _this3=this;if(Baic.isUndefined(value)){if(!Baic.isJSON(name))return this[0].style[name]||document.defaultView.getComputedStyle(this[0],"")[name];Baic.each(name,function(value,key){_this3.css(key,value)}.bind(this))}else Baic.each(this,function(item){item.style[name]=Baic.toStr(value)});return this},vendor:function vendor(name,value,oppo){for(var newname,newvalue,vendor,result,len=Baic.VENDORS.length,i=0;i<len;i++)if(vendor=Baic.VENDORS[i],newname=vendor+name,Baic.isUndefined(value)||Baic.isNull(value)){if(result=this.css(newname))return result}else oppo?(newvalue=vendor+value,this.css(name,newvalue)):this.css(newname,value);return this},rect:function(){return this[0].getBoundingClientRect()},width:function(){return this.rect().width},height:function(){return this.rect().height},offset:function(){var rect=this.rect(),dom=this[0],doc=dom&&dom.ownerDocument;if(doc){var docElem=doc.documentElement,win=Baic.getWindow(doc);return{left:rect.left+win.pageXOffset-docElem.clientLeft,top:rect.top+win.pageYOffset-docElem.clientTop,width:rect.width,height:rect.height}}},append:_addElement(0),prepend:_addElement(1),replaceWith:_addElement(2),createElement:function(obj){return obj?(this.append(_createElements(obj)),this):null},createElementPrepend:function(obj){return obj?(this.prepend(_createElements(obj)),this):null},id:function(index){return Baic.isNumber(index)&&index<this.length?this[0].id=Baic.id():Baic.map(this,function(item){return item.id||(item.id=Baic.id())})}}),Baic.extend({createElements:_createBaicElements,$:_createBaicElements,createElementPrepend:function(obj,parentNode){return obj&&parentNode?(parentNode.isB?parentNode:Baic(parentNode)).createElementPrepend(obj):null},id:function(element,index){return element&&element.nodeType?element.id||(element.id=Baic.id()):Baic.isArray(element)?Baic.isNumber(index)&&index<this.length?this[0].id=Baic.id():Baic.map(this,function(item){return item.id||(item.id=Baic.id())}):"__id_"+ELEMENT_ID++}}),"function"==typeof define&&define.amd&&define("Baic",[],function(){return Baic}),Baic});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};!function(global,factory){if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports))module.exports=global.Baic?factory(global,global.Baic):function(w,frame){if(!w.Baic)throw new Error("event requires with Baic");return factory(w,frame)};else{if(!global.Baic)throw new Error("event requires with Baic");factory(global,global.Baic)}}("undefined"!=typeof window?window:void 0,function(window,Baic){function _getEventName(eventName){return eventName=eventName.toLowerCase(),(Baic.browser.mobile?eventName:_EVENTS_PC[eventName])||eventName}function _createProxyCallback(callback,element){return function(){var event=arguments.length<=0||void 0===arguments[0]?window.event:arguments[0];event&&!event.target&&(event.target=event.srcElement),callback.apply(element,[event].concat(event.data))===!1&&event.preventDefault()}}var _EVENTS_PC={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",tap:"click",doubletap:"dblclick",orientationchange:"resize"},_HANDLERS={};return Baic.extend({createEvent:function(type,options){var event=document.createEvent("Events");return event.initEvent(_getEventName(type),!0,!0,null,null,null,null,null,null,null,null,null,null,null,null),options&&Baic.extend(!0,event,options),event},addEventListener:function(element,eventName,callback,bool){element.addEventListener?element.addEventListener(eventName,callback,!Baic.isUndefined(bool)&&bool):element.attachEvent?element.attachEvent("on"+eventName,callback):element["on"+eventName]=callback},removeEventListener:function(element,eventName,callback,bool){element.removeEventListener?element.removeEventListener(eventName,callback,!Baic.isUndefined(bool)&&bool):element.detachEvent?element.detachEvent("on"+eventName,callback):element["on"+eventName]=null}}),Baic.extend(Baic.fn,{on:function(eventName,callback,bool){var event=_getEventName(eventName);return Baic.each(this,function(item){var id=Baic.id(item),elementHandlers=_HANDLERS[id]||(_HANDLERS[id]=[]),handler={event:event,callback:callback,proxy:_createProxyCallback(callback,item),index:elementHandlers.length};elementHandlers.push(handler),Baic.addEventListener(item,handler.event,handler.proxy,bool)}),this},off:function(eventName,callback,bool){var event=_getEventName(eventName);return Baic.each(this,function(item){var id=Baic.id(item);Baic.each(_HANDLERS[id]||[],function(handler){!handler||event&&handler.event!==event||callback&&handler.callback!==callback||(delete _HANDLERS[id][handler.index],Baic.removeEventListener(item,handler.event,handler.proxy,bool))})}),this},trigger:function(event,options,srcEvent){return Baic.isString(event)&&(event=Baic.createEvent(event,options)),Baic.isNull(srcEvent)||(event.srcEvent=srcEvent),Baic.each(this,function(item){item.dispatchEvent(event)}),this}}),"function"==typeof define&&define.amd&&define("Baic",[],function(){return Baic}),Baic});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};!function(global,factory){if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports))module.exports=global.Baic?factory(global,global.Baic,!0):function(w,frame){if(!w.Baic)throw new Error("fetch requires with Baic");return factory(w,frame)};else{if(!global.Baic)throw new Error("fetch requires with Baic");factory(global,global.Baic)}}("undefined"!=typeof window?window:void 0,function(window,Baic,noFrame){function _normalizeName(name){if("string"!=typeof name&&(name=String(name)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name))throw new TypeError("Invalid character in header field name");return name.toLowerCase()}function _normalizeValue(value){return"string"!=typeof value&&(value=String(value)),value}function Headers(headers){var _this=this,self=this;self.map={},headers instanceof Headers?Baic.each(headers,function(value,name){_this.append(name,value)}):headers&&Baic.each(Object.getOwnPropertyNames(headers),function(name){self.append(name,headers[name])})}function _consumed(body){return body.bodyUsed?Promise.reject(new TypeError("Already read")):void(body.bodyUsed=!0)}function _fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)},reader.onerror=function(){reject(reader.error)}})}function _readBlobAsArrayBuffer(blob){var reader=new FileReader;return reader.readAsArrayBuffer(blob),_fileReaderReady(reader)}function _readBlobAsText(blob){var reader=new FileReader;return reader.readAsText(blob),_fileReaderReady(reader)}function Body(){var _this2=this;return this.bodyUsed=!1,this._initBody=function(body){if(_this2._bodyInit=body,"string"==typeof body)_this2._bodyText=body;else if(support.blob&&Blob.prototype.isPrototypeOf(body))_this2._bodyBlob=body;else if(support.formData&&FormData.prototype.isPrototypeOf(body))_this2._bodyFormData=body;else if(body){if(!support.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(body))throw new Error("unsupported BodyInit type")}else _this2._bodyText=""},support.blob?(this.blob=function(){
var rejected=_consumed(_this2);if(rejected)return rejected;if(_this2._bodyBlob)return Promise.resolve(_this2._bodyBlob);if(_this2._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([_this2._bodyText]))},this.arrayBuffer=function(){return _this2.blob().then(_readBlobAsArrayBuffer)},this.text=function(){var rejected=_consumed(_this2);if(rejected)return rejected;if(_this2._bodyBlob)return _readBlobAsText(_this2._bodyBlob);if(_this2._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(_this2._bodyText)}):this.text=function(){var rejected=_consumed(_this2);return rejected?rejected:Promise.resolve(_this2._bodyText)},support.formData&&(this.formData=function(){return _this2.text().then(_decode)}),this.json=function(){return _this2.text().then(JSON.parse)},this}function _normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}function Request(input){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],body=options.body;if(Request.prototype.isPrototypeOf(input)){if(input.bodyUsed)throw new TypeError("Already read");this.url=input.url,this.credentials=input.credentials,options.headers||(this.headers=new Headers(input.headers)),this.method=input.method,this.mode=input.mode,body||(body=input._bodyInit,input.bodyUsed=!0)}else this.url=input;if(this.credentials=options.credentials||this.credentials||"omit",!options.headers&&this.headers||(this.headers=new Headers(options.headers)),this.method=_normalizeMethod(options.method||this.method||"GET"),this.mode=options.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(body)}function _decode(body){var form=new FormData;return Baic.each(body.trim().split("&"),function(bytes){if(bytes){var split=bytes.split("="),name=split.shift().replace(/\+/g," "),value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}}),form}function _headers(xhr){var head=new Headers,pairs=xhr.getAllResponseHeaders().trim().split("\n");return Baic.each(pairs,function(header){var split=header.trim().split(":"),key=split.shift().trim(),value=split.join(":").trim();head.append(key,value)}),head}function Response(bodyInit){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this._initBody(bodyInit),this.type="default",this.status=options.status,this.ok=this.status>=200&&this.status<300,this.statusText=options.statusText,this.headers=options.headers instanceof Headers?options.headers:new Headers(options.headers),this.url=options.url||""}Baic.extend(Headers.prototype,{append:function(name,value){name=_normalizeName(name),value=_normalizeValue(value);var list=this.map[name];list||(list=[],this.map[name]=list),list.push(value)},forEach:function(callback){var self=this;Baic.each(Object.getOwnPropertyNames(self.map),function(name){Baic.each(self.map[name],function(value){callback.call(self,value,name)})})},delete:function(name){delete this.map[_normalizeName(name)]},get:function(name){var values=this.map[_normalizeName(name)];return values?values[0]:null},getAll:function(name){return this.map[_normalizeName(name)]||[]},has:function(name){return this.map.hasOwnProperty(_normalizeName(name))},set:function(name,value){this.map[_normalizeName(name)]=[_normalizeValue(value)]}});var support={blob:"FileReader"in window&&"Blob"in window&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in window,arrayBuffer:"ArrayBuffer"in window},methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];Baic.extend(Request.prototype,{clone:function(){return new Request(this)}}),Body.call(Request.prototype),Body.call(Response.prototype),Baic.extend(Response.prototype,{clone:function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})}}),Baic.extend(Response,{error:function(){var response=new Response(null,{status:0,statusText:""});return response.type="error",response},redirect:function(url,status){if(_redirectStatuses.indexOf(status)===-1)throw new RangeError("Invalid status code");return new Response(null,{status:status,headers:{location:url}})}});var _redirectStatuses=[301,302,303,307,308],Fetch=function(input,init){return new Promise(function(resolve,reject){function responseURL(){return"responseURL"in xhr?xhr.responseURL:/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())?xhr.getResponseHeader("X-Request-URL"):void 0}var request;request=Request.prototype.isPrototypeOf(input)&&!init?input:new Request(input,init);var xhr=new XMLHttpRequest;xhr.onload=function(){var status=1223===xhr.status?204:xhr.status;if(status<100||status>599)return void reject(new TypeError("Network request failed"));var options={status:status,statusText:xhr.statusText,headers:_headers(xhr),url:responseURL()},body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))},xhr.onerror=function(){reject(new TypeError("Network request failed"))},xhr.open(request.method,request.url,!0),"include"===request.credentials&&(xhr.withCredentials=!0),"responseType"in xhr&&support.blob&&(xhr.responseType="blob"),Baic.each(request.headers,function(value,name){xhr.setRequestHeader(name,value)}),xhr.send("undefined"==typeof request._bodyInit?null:request._bodyInit)})};return Baic.extend(Fetch,{polyfill:!0}),"function"==typeof define&&define.amd&&define("Fetch",[],function(){return Fetch}),"undefined"==typeof noFrame&&(Baic.fetch=Fetch)&&("fetch"in window||(window.fetch=Fetch)),Fetch});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};!function(global,factory){if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports))module.exports=global.Baic?factory(global,global.Baic):function(w,frame){if(!w.Baic)throw new Error("jsx requires with Baic");return factory(w,frame)};else{if(!global.Baic)throw new Error("jsx requires with Baic");factory(global,global.Baic)}}("undefined"!=typeof window?window:void 0,function(window,Baic){return Baic.extend(Baic.fn,{process:function(){var eventName=this.attr("b-link-event"),link=this.attr("b-link"),replace=(this.attr("b-link-replace")||"").toBoolean();if(this.removeAttr("b-link"),this.removeAttr("b-link-replace"),this.removeAttr("b-link-event"),link){this.attr("tap-highlight","yes");var prefix=link.charAt(0);this.on(eventName||"singleTap",function(event){if(event.stopPropagation(),"*"===prefix){var args=Baic.map(link.substring(1).split(/\s+/),function(item){return Baic.url.decode(item)}),name=args.shift(),fn=window[name];fn&&Baic.isFunction(Fn)&&fn.apply(window,[event].concat(args))}else replace?location.replace(link):location.href=link})}return Baic.each(this.children(),function(child){Baic(child).process()}),this}}),Baic.extend({jsx:function(type,properties,children){return properties=properties||{},Baic.isString(type)?properties.tag=type:type.tag&&(properties.tag=type.tag),arguments.length>2&&(children=Baic.toArray(arguments).slice(2),children[0]&&!children[0].isB&&(properties.html=children[0],children.shift()),properties.components=Baic.map(children.filter(function(value){return null!=value&&value!==!1&&""!==value}),function(value){return value.isB?value:Baic.$(""+value)})),Baic.$(properties).process()}}),"function"==typeof define&&define.amd&&define("Baic",[],function(){return Baic}),Baic});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};!function(global,factory){if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports))module.exports=global.Baic?factory(global,global.Baic):function(w,frame){if(!w.Baic)throw new Error("oop requires with Baic");return factory(w,frame)};else{if(!global.Baic)throw new Error("oop requires with Baic");factory(global,global.Baic)}}("undefined"!=typeof window?window:void 0,function(window,Baic){function _extends(obj){var object=function(){this.__needinit__&&this.init.apply(this,arguments)},prototype=new this;prototype.__needinit__=1;var rtn=(Baic.isFunction(obj)?obj():obj)||{};return Baic.each(rtn,function(value,key){switch(key){case"__superclass__":case"__class__":case"__needinit__":break;case"static":Baic.extend(object,value);break;default:prototype[key]=value}}),Baic.extend(prototype,{__superclass__:this,__class__:object,constructor:object,init:prototype.init||Baic.nop}),object.prototype=prototype,Baic.extend(object,{__superclass__:prototype,extends:_extends,create:function(){var obj=new this;return obj.__needinit__=1,obj.init.apply(obj,arguments),obj}}),object}return Array.extends=Object.extends=_extends,"function"==typeof define&&define.amd&&define("Baic",[],function(){return Baic}),Baic});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};!function(global,factory){if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports))module.exports=global.Baic?factory(global,global.Baic,!0):function(w,frame){if(!w.Baic)throw new Error("promise requires with Baic");return factory(w,frame)};else{if(!global.Baic)throw new Error("promise requires with Baic");factory(global,global.Baic)}}("undefined"!=typeof window?window:void 0,function(window,Baic,noFrame){var async=function(require){function isNode(){return"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)}function hasMutationObserver(){return"function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver}function initMutationObserver(MutationObserver){function run(){var f=scheduled;scheduled=void 0,f()}var scheduled,node=document.createTextNode(""),o=new MutationObserver(run);o.observe(node,{characterData:!0});var i=0;return function(f){scheduled=f,node.data=i^=1}}var MutationObs,capturedSetTimeout="undefined"!=typeof setTimeout&&setTimeout,setTimer=function(f,ms){return setTimeout(f,ms)},clearTimer=function(t){return clearTimeout(t)},asap=function(f){return capturedSetTimeout(f,0)};if(isNode())asap=function(f){return process.nextTick(f)};else if(MutationObs=hasMutationObserver())asap=initMutationObserver(MutationObs);else if(!capturedSetTimeout){var vertxRequire=require,vertx=vertxRequire("vertx");setTimer=function(f,ms){return vertx.setTimer(ms,f)},clearTimer=vertx.cancelTimer,asap=vertx.runOnLoop||vertx.runOnContext}return{setTimer:setTimer,clearTimer:clearTimer,asap:asap}}(),Scheduler=function(){function Scheduler(async){this._async=async,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var self=this;this.drain=function(){self._drain()}}return Scheduler.prototype.enqueue=function(task){this._queue[this._queueLen++]=task,this.run()},Scheduler.prototype.afterQueue=function(task){this._afterQueue[this._afterQueueLen++]=task,this.run()},Scheduler.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},Scheduler.prototype._drain=function(){for(var i=0;i<this._queueLen;++i)this._queue[i].run(),this._queue[i]=void 0;for(this._queueLen=0,this._running=!1,i=0;i<this._afterQueueLen;++i)this._afterQueue[i].run(),this._afterQueue[i]=void 0;this._afterQueueLen=0},Scheduler}(),makePromise=function(){var _this=this;return makePromise=function(environment){function Promise(resolver,handler){this._handler=resolver===Handler?handler:init(resolver)}function init(resolver){function promiseResolve(x){handler.resolve(x)}function promiseReject(reason){handler.reject(reason)}function promiseNotify(x){handler.notify(x)}var handler=new Pending;try{resolver(promiseResolve,promiseReject,promiseNotify)}catch(e){promiseReject(e)}return handler}function resolve(x){return isPromise(x)?x:new Promise(Handler,new Async(getHandler(x)))}function reject(x){return new Promise(Handler,new Async(new Rejected(x)))}function never(){return foreverPendingPromise}function defer(){return new Promise(Handler,new Pending)}function begetFrom(parent,Promise){var child=new Pending(parent.receiver,parent.join().context);return new Promise(Handler,child)}function all(promises){return traverseWith(snd,null,promises)}function traverse(f,promises){return traverseWith(tryCatch2,f,promises)}function traverseWith(tryMap,f,promises){function mapAt(i,x,resolver){resolver.resolved||traverseAt(promises,settleAt,i,tryMap(f,x,i),resolver)}function settleAt(i,x,resolver){results[i]=x,0===--pending&&resolver.become(new Fulfilled(results))}for(var x,handler="function"==typeof f?mapAt:settleAt,resolver=new Pending,pending=promises.length>>>0,results=new Array(pending),i=0;i<promises.length&&!resolver.resolved;++i)x=promises[i],void 0!==x||i in promises?traverseAt(promises,handler,i,x,resolver):--pending;return 0===pending&&resolver.become(new Fulfilled(results)),new Promise(Handler,resolver)}function traverseAt(promises,handler,i,x,resolver){if(maybeThenable(x)){var h=getHandlerMaybeThenable(x),s=h.state();0===s?h.fold(handler,i,void 0,resolver):s>0?handler(i,h.value,resolver):(resolver.become(h),visitRemaining(promises,i+1,h))}else handler(i,x,resolver)}function visitRemaining(promises,start,handler){for(var i=start;i<promises.length;++i)markAsHandled(getHandler(promises[i]),handler)}function markAsHandled(h,handler){if(h!==handler){var s=h.state();0===s?h.visit(h,void 0,h._unreport):s<0&&h._unreport()}}function race(promises){return"object"!==("undefined"==typeof promises?"undefined":_typeof(promises))||null===promises?reject(new TypeError("non-iterable passed to race()")):0===promises.length?never():1===promises.length?resolve(promises[0]):runRace(promises)}function runRace(promises){var i,x,h,resolver=new Pending;for(i=0;i<promises.length;++i)if(x=promises[i],void 0!==x||i in promises){if(h=getHandler(x),0!==h.state()){resolver.become(h),visitRemaining(promises,i+1,h);break}h.visit(resolver,resolver.resolve,resolver.reject)}return new Promise(Handler,resolver)}function getHandler(x){return isPromise(x)?x._handler.join():maybeThenable(x)?getHandlerUntrusted(x):new Fulfilled(x)}function getHandlerMaybeThenable(x){return isPromise(x)?x._handler.join():getHandlerUntrusted(x)}function getHandlerUntrusted(x){try{var untrustedThen=x.then;return"function"==typeof untrustedThen?new Thenable(untrustedThen,x):new Fulfilled(x)}catch(e){return new Rejected(e)}}function Handler(){}function FailIfRejected(){}function Pending(receiver,inheritedContext){Promise.createContext(this,inheritedContext),this.consumers=void 0,this.receiver=receiver,this.handler=void 0,this.resolved=!1}function Async(handler){this.handler=handler}function Thenable(then,thenable){Pending.call(this),tasks.enqueue(new AssimilateTask(then,thenable,this))}function Fulfilled(x){Promise.createContext(this),this.value=x}function Rejected(x){Promise.createContext(this),this.id=++errorId,this.value=x,this.handled=!1,this.reported=!1,this._report()}function ReportTask(rejection,context){this.rejection=rejection,this.context=context}function UnreportTask(rejection){this.rejection=rejection}function cycle(){return new Rejected(new TypeError("Promise cycle"))}function ContinuationTask(continuation,handler){this.continuation=continuation,this.handler=handler}function ProgressTask(value,handler){this.handler=handler,this.value=value}function AssimilateTask(then,thenable,resolver){this._then=then,this.thenable=thenable,this.resolver=resolver}function tryAssimilate(then,thenable,resolve,reject,notify){try{then.call(thenable,resolve,reject,notify)}catch(e){reject(e)}}function Fold(f,z,c,to){this.f=f,this.z=z,this.c=c,this.to=to,this.resolver=failIfRejected,this.receiver=this}function isPromise(x){return x instanceof Promise}function maybeThenable(x){return("object"===("undefined"==typeof x?"undefined":_typeof(x))||"function"==typeof x)&&null!==x}function runContinuation1(f,h,receiver,next){return"function"!=typeof f?next.become(h):(Promise.enterContext(h),tryCatchReject(f,h.value,receiver,next),void Promise.exitContext())}function runContinuation3(f,x,h,receiver,next){return"function"!=typeof f?next.become(h):(Promise.enterContext(h),tryCatchReject3(f,x,h.value,receiver,next),void Promise.exitContext())}function runNotify(f,x,h,receiver,next){return"function"!=typeof f?next.notify(x):(Promise.enterContext(h),tryCatchReturn(f,x,receiver,next),void Promise.exitContext())}function tryCatch2(f,a,b){try{return f(a,b)}catch(e){return reject(e)}}function tryCatchReject(f,x,thisArg,next){try{next.become(getHandler(f.call(thisArg,x)))}catch(e){next.become(new Rejected(e))}}function tryCatchReject3(f,x,y,thisArg,next){try{f.call(thisArg,x,y,next)}catch(e){next.become(new Rejected(e))}}function tryCatchReturn(f,x,thisArg,next){try{next.notify(f.call(thisArg,x))}catch(e){next.notify(e)}}function inherit(Parent,Child){Child.prototype=objectCreate(Parent.prototype),Child.prototype.constructor=Child}function snd(x,y){return y}function noop(){}function initEmitRejection(){return"undefined"!=typeof process&&null!==process&&"function"==typeof process.emit?function(type,rejection){return"unhandledRejection"===type?process.emit(type,rejection.value,rejection):process.emit(type,rejection)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(noop,self,CustomEvent){var hasCustomEvent=!1;try{var ev=new CustomEvent("unhandledRejection");hasCustomEvent=ev instanceof CustomEvent}catch(e){}return hasCustomEvent?function(type,rejection){var ev=new CustomEvent(type,{detail:{reason:rejection.value,key:rejection},bubbles:!1,cancelable:!0});return!self.dispatchEvent(ev)}:noop}(noop,self,CustomEvent):noop}var tasks=environment.scheduler,emitRejection=initEmitRejection(),objectCreate=Object.create||function(proto){return Child=function(){},Child.prototype=proto,new Child};Promise.resolve=resolve,Promise.reject=reject,Promise.never=never,Promise._defer=defer,Promise._handler=getHandler,Promise.prototype.then=function(onFulfilled,onRejected,onProgress){var parent=this._handler,state=parent.join().state();if("function"!=typeof onFulfilled&&state>0||"function"!=typeof onRejected&&state<0)return new this.constructor(Handler,parent);var p=this._beget(),child=p._handler;return parent.chain(child,parent.receiver,onFulfilled,onRejected,onProgress),p},Promise.prototype.catch=function(onRejected){return this.then(void 0,onRejected)},Promise.prototype._beget=function(){return begetFrom(this._handler,this.constructor)},Promise.all=all,Promise.race=race,Promise._traverse=traverse,Promise._visitRemaining=visitRemaining,Handler.prototype.when=Handler.prototype.become=Handler.prototype.notify=Handler.prototype.fail=Handler.prototype._unreport=Handler.prototype._report=noop,Handler.prototype._state=0,Handler.prototype.state=function(){return this._state},Handler.prototype.join=function(){for(var h=this;void 0!==h.handler;)h=h.handler;return h},Handler.prototype.chain=function(to,receiver,fulfilled,rejected,progress){this.when({resolver:to,receiver:receiver,fulfilled:fulfilled,rejected:rejected,progress:progress})},Handler.prototype.visit=function(receiver,fulfilled,rejected,progress){this.chain(failIfRejected,receiver,fulfilled,rejected,progress)},Handler.prototype.fold=function(f,z,c,to){this.when(new Fold(f,z,c,to))},inherit(Handler,FailIfRejected),FailIfRejected.prototype.become=function(h){h.fail()};var failIfRejected=new FailIfRejected;inherit(Handler,Pending),Pending.prototype._state=0,Pending.prototype.resolve=function(x){_this.become(getHandler(x))},Pending.prototype.reject=function(x){_this.resolved||_this.become(new Rejected(x))},Pending.prototype.join=function(){if(!this.resolved)return this;for(var h=this;void 0!==h.handler;)if(h=h.handler,h===this)return this.handler=cycle();return h},Pending.prototype.run=function(){var q=this.consumers,handler=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var i=0;i<q.length;++i)handler.when(q[i])},Pending.prototype.become=function(handler){_this.resolved||(_this.resolved=!0,_this.handler=handler,void 0!==_this.consumers&&tasks.enqueue(_this),void 0!==_this.context&&handler._report(_this.context))},Pending.prototype.when=function(continuation){_this.resolved?tasks.enqueue(new ContinuationTask(continuation,_this.handler)):void 0===_this.consumers?_this.consumers=[continuation]:_this.consumers.push(continuation)},Pending.prototype.notify=function(x){_this.resolved||tasks.enqueue(new ProgressTask(x,_this))},Pending.prototype.fail=function(context){var c="undefined"==typeof context?_this.context:context;_this.resolved&&_this.handler.join().fail(c)},Pending.prototype._report=function(context){_this.resolved&&_this.handler.join()._report(context)},Pending.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},inherit(Handler,Async),Async.prototype.when=function(continuation){tasks.enqueue(new ContinuationTask(continuation,_this))},Async.prototype._report=function(context){_this.join()._report(context)},Async.prototype._unreport=function(){this.join()._unreport()},inherit(Pending,Thenable),inherit(Handler,Fulfilled),Fulfilled.prototype._state=1,Fulfilled.prototype.fold=function(f,z,c,to){runContinuation3(f,z,this,c,to)},Fulfilled.prototype.when=function(cont){runContinuation1(cont.fulfilled,_this,cont.receiver,cont.resolver)};var errorId=0;inherit(Handler,Rejected),Rejected.prototype._state=-1,Rejected.prototype.fold=function(f,z,c,to){to.become(this)},Rejected.prototype.when=function(cont){"function"==typeof cont.rejected&&_this._unreport(),runContinuation1(cont.rejected,_this,cont.receiver,cont.resolver)},Rejected.prototype._report=function(context){tasks.afterQueue(new ReportTask(_this,context))},Rejected.prototype._unreport=function(){this.handled||(this.handled=!0,tasks.afterQueue(new UnreportTask(this)))},Rejected.prototype.fail=function(context){_this.reported=!0,emitRejection("unhandledRejection",_this),Promise.onFatalRejection(_this,void 0===context?_this.context:context)},ReportTask.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,emitRejection("unhandledRejection",this.rejection)||Promise.onPotentiallyUnhandledRejection(this.rejection,this.context))},UnreportTask.prototype.run=function(){this.rejection.reported&&(emitRejection("rejectionHandled",this.rejection)||Promise.onPotentiallyUnhandledRejectionHandled(this.rejection))},Promise.createContext=Promise.enterContext=Promise.exitContext=Promise.onPotentiallyUnhandledRejection=Promise.onPotentiallyUnhandledRejectionHandled=Promise.onFatalRejection=noop;var foreverPendingHandler=new Handler,foreverPendingPromise=new Promise(Handler,foreverPendingHandler);return ContinuationTask.prototype.run=function(){this.handler.join().when(this.continuation)},ProgressTask.prototype.run=function(){var q=this.handler.consumers;if(void 0!==q)for(var c,i=0;i<q.length;++i)c=q[i],runNotify(c.progress,this.value,this.handler,c.receiver,c.resolver)},AssimilateTask.prototype.run=function(){function _resolve(x){h.resolve(x)}function _reject(x){h.reject(x)}function _notify(x){h.notify(x)}var h=this.resolver;tryAssimilate(this._then,this.thenable,_resolve,_reject,_notify)},Fold.prototype.fulfilled=function(x){_this.f.call(_this.c,_this.z,x,_this.to)},Fold.prototype.rejected=function(x){_this.to.reject(x)},Fold.prototype.progress=function(x){_this.to.notify(x)},Promise}}(),Promise=makePromise({scheduler:new Scheduler(async.asap)});return"function"==typeof define&&define.amd&&define("Promise",[],function(){return Promise}),"undefined"==typeof noFrame&&(Baic.Promise=Promise)&&("Promise"in window||(window.Promise=Promise)),Promise});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};!function(global,factory){if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports))module.exports=global.Baic?factory(global,global.Baic,!0):function(w,frame){if(!w.Baic)throw new Error("require requires with Baic");return factory(w,frame)};else{if(!global.Baic)throw new Error("require requires with Baic");factory(global,global.Baic)}}("undefined"!=typeof window?window:void 0,function(window,Baic,noFrame){function _getScriptAbsPath(){var url="";try{url=document.currentScript.src}catch(e){url=/(?:http|https|file):\/\/.*?\/.+?.js/.exec(e.stack||e.sourceURL||e.stacktrace)[0]||""}return url.substring(0,url.lastIndexOf("/")+1)}function _getUrl(url){return EXP_HTTP.test(url)||(url=baseUrl+url),!EXP_EXT.test(url)&&url.indexOf("?")<0&&(url+=".js"),url}function _createJs(url){var node=document.createElement("script");return node.src=url,new Promise(function(resolve,reject){function _onload(event){("load"===event.type||EXP_READY.test(node.readyState))&&(_removeListener(),resolve(node))}function _error(){_removeListener(),reject(url)}function _removeListener(){node.removeEventListener?(node.removeEventListener("load",_onload,!1),node.removeEventListener("error",_error,!1)):node.detachEvent("onreadystatechange",_onload)}node.addEventListener?(node.addEventListener("load",_onload,!1),node.addEventListener("error",_error,!1)):node.attachEvent("onreadystatechange",_onload),head.appendChild(node)})}function _createCss(url){var node=document.createElement("link");return node.rel="stylesheet",node.href=url,head.appendChild(node),Promise.resolve(node)}function _createImage(url){var image=new Image;return image.src=url,image.complete?Promise.resolve(image):new Promise(function(resolve,reject){image.onload=function(){resolve(image)},image.onerror=function(){reject(image)}})}function _load(url){var complete=_getUrl(url),index=complete.indexOf("?");return url=index>=0?complete.substring(0,index):complete,EXP_JS.test(url)?_createJs(complete):EXP_CSS.test(url)?_createCss(complete):EXP_IMAGE.test(url)?_createImage(complete):Promise.resolve(complete)}for(var script,main,EXP_READY=/complete|loaded|interactive/,EXP_HTTP=/((^http)|(^https)):\/\/(\w)+.(\w)+/i,EXP_EXT=/(?:\.js|\.css|\.jpg|\.jpeg|\.png|\.gif)$/i,EXP_IMAGE=/(?:\.jpg|\.jpeg|\.png|\.gif)$/i,EXP_CSS=/\.css$/i,EXP_JS=/\.js$/i,scripts=document.getElementsByTagName("script"),head=document.head||document.getElementsByTagName("head")[0]||document.documentElement,len=scripts.length,isReady=EXP_READY.test(document.readyState),baseUrl=_getScriptAbsPath(),Require=function(){var args=Array.from(arguments);return args.length>0&&Baic.isArray(args[0])&&(args=args[0]),new Promise(function(resolve){function _DOMLoaded(){if(document.addEventListener)document.removeEventListener("DOMContentLoaded",_DOMLoaded,!1);else{if(!isReady)return;document.detachEvent("onreadystatechange",_DOMLoaded)}isReady=!0,resolve()}isReady?setTimeout(_DOMLoaded,100):document.addEventListener?(document.addEventListener("DOMContentLoaded",_DOMLoaded,!1),window.addEventListener("load",_DOMLoaded,!1)):(document.attachEvent("onreadystatechange",_DOMLoaded),window.attachEvent("onload",_DOMLoaded))}).then(function(){return Promise.all(Baic.map(args,function(item){return item?_load(item):Promise.resolve()}))})},i=0;i<len;i++)if(script=scripts[i],baseUrl=script.getAttribute("data-base-url")||baseUrl,script.hasAttribute("data-require")){main=script.getAttribute("data-require"),main&&Baic.each(main.split(";"),function(item){item.indexOf(",")<0?Require(item):Baic.each(item.split(","),function(item){Require(item)})});break}return Baic.extend(Require,{baseUrl:baseUrl}),"function"==typeof define&&define.amd&&define("Require",[],function(){return Require}),"undefined"==typeof noFrame&&(window.require=Baic.require=Require),Require});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};!function(global,factory){if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports))module.exports=global.Baic?factory(global,global.Baic):function(w,frame){if(!w.Baic)throw new Error("selector requires with Baic");return factory(w,frame)};else{if(!global.Baic)throw new Error("selector requires with Baic");factory(global,global.Baic)}}("undefined"!=typeof window?window:void 0,function(window,Baic){function _filtered(dom,selector){return!selector||dom.parentNode&&Baic.selector(dom.parentNode,selector).indexOf(dom)>=0}var IS_HTML_FRAGMENT=/^\s*<(\w+|!)[^>]*>/,CLASS_SELECTOR=/^\.([\w-]+)$/,ID_SELECTOR=/^#[\w\d-]+$/,TAG_SELECTOR=/^[\w-]+$/,TMP_CONTAINER=document.createElement("div");return Baic.extend({getDOMObject:function(selector,children){var elementTypes=[1,9,11];if(Baic.isArray(selector))return selector.filter(function(item){return null!=item});if(Baic.isString(selector)){if(selector=selector.trim(),IS_HTML_FRAGMENT.test(selector)){TMP_CONTAINER.innerHTML=""+selector;var tmp_container=Baic(TMP_CONTAINER),nodes=Baic.toArray(tmp_container.children());return tmp_container.empty(),nodes}var dom=Baic.selector(document,selector);return children&&Baic.isString(children)&&(dom=1===dom.length?Baic.selector(dom[0],children):Baic.map(dom,function(item){return Baic.selector(item,children)})),dom}return elementTypes.indexOf(selector.nodeType)>=0||Baic.isWindow(selector)?[selector]:void 0},selector:function(dom,_selector){var elements=[];return CLASS_SELECTOR.test(_selector)?elements=dom.getElementsByClassName(_selector.substring(1)):TAG_SELECTOR.test(_selector)?elements=dom.getElementsByTagName(_selector):ID_SELECTOR.test(_selector)?(elements=dom.getElementById(_selector.substring(1)),elements||(elements=[])):elements=dom.querySelectorAll(_selector),elements.nodeType?[elements]:Baic.toArray(elements)}}),Baic.extend(Baic.fn,{find:function(selector){return Baic.flatten(Baic(Baic.map(this,function(item){return Baic.selector(item,selector)})))},parent:function(selector){if(selector){var ancestors=[];return Baic(Baic.map(this,function(item){if(item&&(item=item.parentNode)&&item!==document&&ancestors.indexOf(item)<0&&ancestors.push(item)&&_filtered(item,selector))return item}))}return Baic(Baic.map(this,function(item){return item.parentNode}))},siblings:function siblings(selector){var siblings=[];return Baic.flatten(Baic(Baic.map(this,function(item){return Baic.toArray(item.parentNode.children).filter(function(child){return siblings.indexOf(child)<0&&siblings.push(child)&&child!==item&&_filtered(item,selector)})})))},children:function(selector){return Baic.flatten(Baic(Baic.map(this,function(item){return Baic.toArray(item.children).filter(function(child){return _filtered(child,selector)})})))},first:function(){return Baic(this[0])},last:function(){return Baic(this[this.length-1])}}),"function"==typeof define&&define.amd&&define("Baic",[],function(){return Baic}),Baic});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};!function(global,factory){if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports))module.exports=global.Baic?factory(global,global.Baic):function(w,frame){if(!w.Baic)throw new Error("store requires with Baic");return factory(w,frame)};else{if(!global.Baic)throw new Error("store requires with Baic");factory(global,global.Baic)}}("undefined"!=typeof window?window:void 0,function(window,Baic){var _isValidKey=new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$');
return Baic.extend({storage:{set:function(key,value,expires){_isValidKey.test(key)&&(Baic.isObject(value)&&(value="@"+Baic.toStr(value)),window.localStorage.setItem(key,value),expires&&(Baic.isNumber(expires)&&(expires=date.setTime(Date.now()+expires)),window.localStorage.setItem(key+".expires",expires)))},get:function(key){var result=null;if(_isValidKey.test(key)&&(result=window.localStorage.getItem(key))){0===result.indexOf("@")&&(result=result.slice(1).parseJSON());var expires=parseInt(window.localStorage.getItem(key+".expires"));expires=expires?new Date(expires).getTime():null,result&&expires&&expires<Date.now()&&(result=null,window.localStorage.removeItem(key),window.localStorage.removeItem(key+".expires"))}return result},remove:function(key){_isValidKey.test(key)&&(window.localStorage.removeItem(key),window.localStorage.removeItem(key+".expires"))},clearAll:function(){window.localStorage.clear()}},cookie:{get:function(key){var result=null;return _isValidKey.test(key)&&(result=new RegExp("(^| )"+key+"=([^;/]*)([^;$]*)(;|$)").exec(document.cookie),result&&(result=result[2]||null),Baic.isString(result))?decodeURIComponent(result):null},set:function(key,value,expires){_isValidKey.test(key)&&(expires=Baic.isNumber(expires)?";expires="+new Date(Date.now()+1e3*expires).toGMTString():"",document.cookie=encodeURIComponent(key)+"="+encodeURIComponent(Baic.toStr(value))+expires)},remove:function(key){if(_isValidKey.test(key)){var obj=this.get(key);null!=obj&&this.set(key,"",-1)}},clearAll:function(){Baic.each(document.cookie.match(/[^ =;]+(?=\=)/g)||[],Baic.cookie.remove.bind(this))}}}),"function"==typeof define&&define.amd&&define("Baic",[],function(){return Baic}),Baic});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};!function(global,factory){if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports))module.exports=global.Baic?factory(global,global.Baic):function(w,frame){if(!w.Baic)throw new Error("task requires with Baic");return factory(w,frame)};else{if(!global.Baic)throw new Error("task requires with Baic");factory(global,global.Baic)}}("undefined"!=typeof window?window:void 0,function(window,Baic){var asap=function(){function flush(){for(;head.next;){head=head.next;var task=head.task;head.task=void 0;try{task()}catch(e){setTimeout(function(){throw e},0)}}flushing=!1}var head={task:void 0,next:null},tail=head,flushing=!1,requestFlush=void 0;if("undefined"!=typeof MessageChannel){var channel=new MessageChannel;channel.port1.onmessage=flush,requestFlush=function(){channel.port2.postMessage(0)}}else requestFlush=function(){setTimeout(flush,0)};return function(task){tail=tail.next={task:task,next:null},flushing||(flushing=!0,requestFlush())}}.call(void 0),_Task=function(asap){(void 0).__asap__=asap},_index=0,_queue={},_queueArgs={},_async={},_asyncArgs={};Baic.extend(_Task.prototype,{scope:function(fn){this.__asap__?asap(fn):fn()}});var _runQueue=function(){return Baic.each(_queue,function(fn,key){var args=_queueArgs[key];fn.result=fn.apply(args[0],args.slice(1))}),new _Task},_runAsync=function(){return Baic.each(_async,function(fn,key){asap(function(){var args=_asyncArgs[key];fn.result=fn.apply(args[0],args.slice(1))})}),new _Task(!0)},_run=function(){return asap(_runQueue),_runAsync(),new _Task(!0)};return Baic.extend(_Task,{run:_run,runQueue:_runQueue,runAsync:_runAsync,clean:function(){asap(function(){_index=0,_queue={},_queueArgs={},_async={},_asyncArgs={}})},inject:function(){var args=Baic.toArray(arguments),scope=args[0];return scope?(scope.__async__?asap(function(){_asyncArgs[scope.__taskindex__]=args}):_queueArgs[scope.__taskindex__]=args,scope):{}},expose:function(){},asyncExpose:function(){}}),Baic.extend(Function.prototype,{queue:function(){var args=Baic.toArray(arguments);return args.unshift(this),_queue[_index]=this,_queueArgs[_index]=args,this.__taskindex__=_index,this.__async__=!1,_index++,this},async:function(){var args=Baic.toArray(arguments);return args.unshift(this),_async[_index]=this,_asyncArgs[_index]=args,this.__taskindex__=_index,this.__async__=!0,_index++,this},inject:function(){return _Task.inject.apply(this,[this].concat(Baic.toArray(arguments)))}}),Baic.extend({task:_Task,runAsyncTask:_runAsync,runQueueTask:_runQueue,runTask:_run,cleanTask:function(){_Task.clean()}}),"function"==typeof define&&define.amd&&define("Baic",[],function(){return Baic}),Baic});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};!function(global,factory){if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports))module.exports=global.Baic?factory(global,global.Baic):function(w,frame){if(!w.Baic)throw new Error("touch requires with Baic");return factory(w,frame)};else{if(!global.Baic)throw new Error("touch requires with Baic");factory(global,global.Baic)}}("undefined"!=typeof window?window:void 0,function(window,Baic){function _onTouchStart(event){singleTapTimeout&&singleTapTimeout.cancel(),longTapTimeout&&longTapTimeout.cancel(),EVENT=event;var now=Date.now(),difftime=now-(touch.lasttime||now),touches=_getTouches(event),eventCount=touches.length,target=Baic(_getTarget(touches[0].target));firstTouch=_touchesPosition(touches,eventCount),touch.el=target,touch.eventCount=eventCount,touch.lasttime=now,touch.dx=0,touch.dy=0,touch.enabled=!1,touch.tapCount?touch.tapCount++:touch.tapCount=1,1===eventCount?(touch.enabled=!0,touch.gap=difftime>0&&difftime<=EVENT_OPTIONS.singleDelay,longTapTimeout=_triggerLongTap.defer(EVENT_OPTIONS.longDelay)):2===eventCount&&(touch.initialDistance=_distance(firstTouch),touch.distance=0)}function _onTouchMove(event){if(EVENT=event,touch.el){var touches=_getTouches(event),eventCount=touches.length;if(eventCount===touch.eventCount){if(lastTouch=_touchesPosition(touches,eventCount),touch.dx=lastTouch[0].x-firstTouch[0].x,touch.dy=lastTouch[0].y-firstTouch[0].y,1===eventCount)touch.enabled&&!(touch.enabled=_inHysteresisSquared())&&_trigger("dragStart"),touch.enabled||(_trigger("drag"),_trigger("drag"+_direction(firstTouch[0].x,lastTouch[0].x,firstTouch[0].y,lastTouch[0].y).firstUpperCase()));else if(2===eventCount)return _triggerZooming(),!1}else _cleanTouch()}}function _onTouchEnd(event){if(EVENT=event,1===touch.eventCount){if(touch.enabled)return longTapTimeout&&longTapTimeout.cancel(),void(1===touch.tapCount?(Baic.browser.mobile&&_trigger("tap"),singleTapTimeout=_triggerSingleTap.defer(EVENT_OPTIONS.singleDelay)):2===touch.tapCount&&touch.gap&&Baic.browser.mobile&&(_trigger("doubleTap"),_cleanTouch()));_trigger("drop",{dir:_direction(firstTouch[0].x,lastTouch[0].x,firstTouch[0].y,lastTouch[0].y)})}else 0!==touch.distance&&_trigger("zoom",{distance:touch.distance,scale:touch.scale});_cleanTouch()}function _getTouches(event){return event.touches||[event]}function _getTarget(node){return"tagName"in node?node:node.parentNode}function _inHysteresisSquared(){return Math.pow(touch.dy,2)+Math.pow(touch.dx,2)<=16}function _trigger(type,params){touch.el&&(params=Baic.extend(params,{starttime:touch.lasttime,dx:touch.dx,dy:touch.dy}),Baic.each(EVENT_ATTRIBUTE,function(item){params[item]="touchend"===EVENT.type&&EVENT.changedTouches&&EVENT.changedTouches[0]&&EVENT.changedTouches[0][item]||EVENT.touches&&EVENT.touches[0]&&EVENT.touches[0][item]||EVENT[item]}),touch.el.trigger(type,params,EVENT))}function _triggerLongTap(){touch.lasttime&&Date.now()-touch.lasttime>=EVENT_OPTIONS.longDelay&&_inHysteresisSquared()&&_trigger("longTap")}function _triggerSingleTap(){_trigger("singleTap"),_cleanTouch()}function _touchesPosition(touches,eventCount){var result=[];touches=touches[0].targetTouches||touches;for(var i=0;i<eventCount;i++)result.push({x:touches[i].pageX,y:touches[i].pageY});return result}function _distance(touchesData){return Math.sqrt(Math.pow(touchesData[0].x-touchesData[1].x,2)+Math.pow(touchesData[0].y-touchesData[1].y,2))}function _direction(x1,x2,y1,y2){var dx=x1-x2,dy=y1-y2;return Math.abs(dx)>=Math.abs(dy)?dx>0?"left":"right":dy>0?"up":"down"}function _cleanTouch(event){singleTapTimeout&&singleTapTimeout.cancel(),longTapTimeout&&longTapTimeout.cancel(),firstTouch=[],lastTouch=[],touch={}}function _triggerZooming(){var distance=_distance(lastTouch),diff=distance-touch.initialDistance|0;(Math.abs(diff)>EVENT_OPTIONS.zoomDelay||touch.distance)&&(touch.distance=diff,touch.scale=distance/touch.initialDistance,_trigger("zooming",{distance:diff,scale:touch.scale}))}var EVENT,singleTapTimeout,longTapTimeout,EVENT_ATTRIBUTE=["clientX","clientY","pageX","pageY","screenX","screenY","identifier","detail","which","rotation","scale"],TOUCH_EVENTS=["tap","singleTap","doubleTap","longTap","dragStart","drag","drop","dragLeft","dragRight","dragUp","dragDown","zoom","zooming"],EVENT_OPTIONS={singleDelay:250,longDelay:650,zoomDelay:10},touch={},firstTouch=[],lastTouch=[];return Baic.each(TOUCH_EVENTS,function(eventName){Baic.fn[eventName]=function(callback){this.on(eventName,callback)}}),Baic.extend({setEventOptions:function(opts){Baic.extend(EVENT_OPTIONS,opts,!0)}}),Baic(function(){Baic(document).on("touchstart",_onTouchStart).on("touchmove",_onTouchMove).on("touchend",_onTouchEnd).on("touchcancel",_cleanTouch)}),"function"==typeof define&&define.amd&&define("Baic",[],function(){return Baic}),Baic});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};!function(global,factory){if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports))module.exports=global.Baic?factory(global,global.Baic,!0):function(w,frame){if(!w.Baic)throw new Error("tpl requires with Baic");return factory(w,frame)};else{if(!global.Baic)throw new Error("tpl requires with Baic");factory(global,global.Baic)}}("undefined"!=typeof window?window:void 0,function(window,Baic,noFrame){function _parseTpl(string,obj){function _getBooleanValue(str){var arr=str.match(BOOLEAN_EXP),value=obj[arr[1]];return String(arr[3]||arr[5]?value?arr[3]||"":arr[5]||"":value)}return string=string.replace(FIRST_EXP,function(matched,str){return str=str.replace(SECOND_EXP,function(matched,str){return _getBooleanValue(str).replace(THIRD_EXP,function(matched,str){return _getBooleanValue(str)})}),_getBooleanValue(str)})}function _process(el){var tpl=this;el=Baic(el);var eventName=el.attr("b-link-event"),link=el.attr("b-link"),replace=/^(?:yes|1|on|true)$/i.test(el.attr("b-link-replace"));if(el.removeAttr("b-link"),el.removeAttr("b-link-replace"),el.removeAttr("b-link-event"),link){el.attr("tap-highlight","yes");var prefix=link.charAt(0);el.on(eventName||"singleTap",function(event){if(event.stopPropagation(),"*"===prefix){var args=Baic.map(link.substring(1).split(/\s+/),function(a){return Baic.url.decode(a)}),name=args.shift(),fn=tpl.tplEventContainer[name]||window[name];fn&&Baic.isFunction(fn)&&fn.apply(tpl.context||window,[event].concat(args))}else replace?location.replace(link):location.href=link})}Baic.each(el.children(),_process.bind(tpl))}function _parseTplDom(){var html=arguments.length<=0||void 0===arguments[0]?"":arguments[0];arguments.length<=1||void 0===arguments[1]?{}:arguments[1];html=html.replace(FIRST_EXP,"");var dom=Baic(html);return Baic.each(dom,_process.bind(this)),dom}var Tpl=function(){function Tpl(){var context=arguments.length<=0||void 0===arguments[0]?Baic(document.body):arguments[0];_classCallCheck(this,Tpl);var self=this;Baic.each(context.find("script[type='text/template']"),function(item){var dom=Baic(item);self.tplMap[dom.attr("name")]=dom.html().replace(/>\s+</g,"><").trim(),dom.remove()}),self.context=context,Baic.each(context.children(),_process.bind(self))}return _createClass(Tpl,[{key:"on",value:function(fnName,fn){Baic.isObject(fnName)?Baic.extend(this.tplEventContainer,fnName):this.tplEventContainer[fnName]=fn}},{key:"get",value:function(name,obj){if(Baic.isUndefined(name))return this.tplMap;var html=name;return name in this.tplMap&&Baic.hasOwn(this.tplMap,name)&&(html=this.tplMap[name]||""),Baic.isJSON(obj)?_parseTpl(html,obj):html}},{key:"dom",value:function(name,obj){var html=this.get(name,obj);return _parseTplDom(html,obj)}}]),Tpl}(),FIRST_EXP=/\$\{\s*(.*?)\s*\}/g,SECOND_EXP=/\$\(\s*(.*?)\s*\)/g,THIRD_EXP=/\$\<\s*(.*?)\s*\>/g,BOOLEAN_EXP=/^([\w\.]+)\s*(\?\s*([^:]*?))?\s*(\:\s*(.*))?$/;return Baic.extend(Tpl.prototype,{context:null,tplEventContainer:{},tplMap:{},parseTpl:_parseTpl,parseTplDom:_parseTplDom}),"function"==typeof define&&define.amd&&define("Tpl",[],function(){return Tpl}),"undefined"==typeof noFrame&&(Baic.tpl=new Tpl),Tpl});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};!function(global,factory){if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports))module.exports=global.Baic?factory(global,global.Baic,!0):function(w,frame){if(!w.Baic)throw new Error("url requires with Baic");return factory(w,frame)};else{if(!global.Baic)throw new Error("url requires with Baic");factory(global,global.Baic)}}("undefined"!=typeof window?window:void 0,function(window,Baic,noFrame){var Url={encode:function(str){return encodeURIComponent(str)},decode:function(str){return/%u[0-9a-f]{4}/i.test(str)?unescape(str):decodeURIComponent(str)},build:function(){var query=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],url=arguments.length<=1||void 0===arguments[1]?location.href:arguments[1];return url+Url.query(query,url.endsWith("?")?"":url.indexOf("?")?"&":"?")},query:function query(obj){var prefix=arguments.length<=1||void 0===arguments[1]?"":arguments[1];if(Baic.isJSON(obj)){var key,serialize=prefix;for(key in obj)!Baic.isUndefined(key)&&Baic.hasOwn(obj,key)&&(serialize!==prefix&&(serialize+="&"),serialize+=key+"="+Url.encode(obj[key]));return serialize===prefix?"":serialize}var parts,part,query={},isUrl=/^(https?\:\/\/|\.\/|\.\.\/)/i.test(obj),search=location.search.slice(1);return Baic.each((isUrl?obj.split("?")[1]:search).split("&"),function(item){parts=item.split("="),parts[0]&&(part=Url.decode(parts[1]),query[parts[0]]=part.isJSONString()?part.parseJSON():part)}),obj?isUrl?query:query[obj]:query}};return"function"==typeof define&&define.amd&&define("Url",[],function(){return Url}),"undefined"==typeof noFrame&&(Baic.url=Url),Url});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};!function(global,factory){if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports))module.exports=global.Baic?factory(global,global.Baic,!0):function(w,frame){if(!w.Baic)throw new Error("view requires with Baic");return factory(w,frame)};else{if(!global.Baic)throw new Error("view requires with Baic");factory(global,global.Baic)}}("undefined"!=typeof window?window:void 0,function(window,Baic,noFrame){var View=Object.extends(function(){var html=Baic("html"),remDom=Baic(".remPage"),pxWidth=remDom.length>0?Baic(remDom[0]).rect().width:320,screenWidth=window.screen.width,screenHeight=window.screen.height;screenWidth=Math.min(screenWidth,screenHeight),screenHeight=Math.max(screenWidth,screenHeight);var clientWidth=document.documentElement.clientWidth,clientHeight=document.documentElement.clientHeight;clientWidth=Math.min(clientWidth,clientHeight),clientHeight=Math.max(clientWidth,clientHeight);var originFontSize=+html.css("fontSize").replace("px","");return screenWidth!=clientWidth&&screenHeight!=clientHeight&&(screenWidth/=Baic.browser.pixelRatio,screenHeight/=Baic.browser.pixelRatio),{init:function(){View.adaptive(),(!Baic.browser.android||Baic.browser.android>4.3)&&Baic(window).on("orientationchange",View.adaptive)},static:{adaptive:function(){var width=90==Math.abs(window.orientation)?screenHeight:screenWidth,scale=pxWidth?width/pxWidth:1,viewportSettings=["width=device-width","initial-scale=1.0","maximum-scale=1.0","user-scalable="+(Baic.browser.android?0:"no")],currentFontSize=originFontSize*scale;Baic.browser.scale=scale,html.data("originPx",originFontSize),html.data("currentPx",currentFontSize),Baic.browser.android&&viewportSettings.push("target-densitydpi="+(Baic.browser.android>4.3?"medium":"device")+"-dpi"),html.css("fontSize",currentFontSize+"px"),Baic("meta[name=viewport]").attr("content",viewportSettings.join(","))}}}});return"function"==typeof define&&define.amd&&define("View",[],function(){return View}),"undefined"==typeof noFrame&&(Baic.View=window.View=View),View});
//# sourceMappingURL=baic.min.js.map